<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Jadwal Matakuliah</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">ðŸŽ“ POLIBATAM</a>
        </div>
    </nav>

    <div class="container mt-5">
        <h2 class="mb-4 text-center">Jadwal Matakuliah</h2>
        
        <button type="button" class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#tambahModal">
            âž• Tambah Jadwal
        </button>

        <div class="table-responsive">
            <table class="table table-striped table-hover table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Semester</th>
                        <th>Matakuliah</th>
                        <th>Hari</th>
                        <th>Jam</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tabelData">
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="tambahModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Tambah Jadwal Matakuliah</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <div class="modal-body">
            <form id="formInput">
              <div class="mb-3">
                <label class="form-label">Semester</label>
                <input type="text" class="form-control" id="semester" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Matakuliah</label>
                <input type="text" class="form-control" id="matkul" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Hari</label>
                <select class="form-select" id="hari" required>
                  <option selected disabled value="">Pilih...</option>
                  <option>Senin</option>
                  <option>Selasa</option>
                  <option>Rabu</option>
                  <option>Kamis</option>
                  <option>Jum'at</option>
                </select>
              </div>

              <div class="mb-3">
                <label class="form-label">Jam</label>
                <input type="text" class="form-control" id="jam" placeholder="Contoh: 18:00-20:30" required>
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
            <button type="button" id="btnSimpan" class="btn btn-primary">Simpan Data</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const tabelBody = document.getElementById("tabelData");
    const btnSimpan = document.getElementById("btnSimpan");

    const semesterInput = document.getElementById("semester");
    const matkulInput = document.getElementById("matkul");
    const hariInput = document.getElementById("hari");
    const jamInput = document.getElementById("jam");

    let editRow = null; // Menyimpan baris yang sedang di-edit

    // ================= SIMPAN / UPDATE DATA =================
    btnSimpan.addEventListener("click", function () {
        let semester = semesterInput.value.trim();
        let matkul = matkulInput.value.trim();
        let hari = hariInput.value;
        let jam = jamInput.value.trim();

        if (!semester || !matkul || !hari || !jam) {
            alert("Semua field harus diisi!");
            return;
        }

        // Jika sedang edit
        if (editRow) {
            editRow.children[1].textContent = semester;
            editRow.children[2].textContent = matkul;
            editRow.children[3].textContent = hari;
            editRow.children[4].textContent = jam;

            btnSimpan.textContent = "Simpan Data";
            editRow = null;
        } 
        else {
            let no = tabelBody.rows.length + 1;

            let row = document.createElement("tr");
            row.innerHTML = `
                <th>${no}</th>
                <td>${semester}</td>
                <td>${matkul}</td>
                <td>${hari}</td>
                <td>${jam}</td>
                <td>
                    <button class="btn btn-sm btn-warning btn-edit">Edit</button>
                    <button class="btn btn-sm btn-danger btn-hapus">Hapus</button>
                </td>
            `;

            tabelBody.appendChild(row);
        }

        clearForm();
        bootstrap.Modal.getInstance(document.getElementById("tambahModal")).hide();
        updateNomor();
    });

    // ================= FITUR HAPUS =================
    tabelBody.addEventListener("click", function (e) {
        if (e.target.classList.contains("btn-hapus")) {
            e.target.closest("tr").remove();
            updateNomor();
        }
    });

    // ================= FITUR EDIT =================
    tabelBody.addEventListener("click", function (e) {
        if (e.target.classList.contains("btn-edit")) {

            editRow = e.target.closest("tr");

            semesterInput.value = editRow.children[1].textContent;
            matkulInput.value = editRow.children[2].textContent;
            hariInput.value = editRow.children[3].textContent;
            jamInput.value = editRow.children[4].textContent;

            btnSimpan.textContent = "Update Data";

            const modal = new bootstrap.Modal(document.getElementById("tambahModal"));
            modal.show();
        }
    });

    // ================= RESET FORM =================
    function clearForm() {
        semesterInput.value = "";
        matkulInput.value = "";
        hariInput.value = "";
        jamInput.value = "";
    }

    // ================= UPDATE NOMOR =================
    function updateNomor() {
        [...tabelBody.rows].forEach((row, i) => {
            row.children[0].textContent = i + 1;
        });
    }

});
</script>
</body>
</html>
